<% content_for :title, "Inicio" %>

<% if user_signed_in? %>
  <!-- DASHBOARD SEGÚN ROL -->

  <div class="dashboard-header bg-primary text-white py-4 mb-4">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-md-8">
          <h1 class="mb-2">
            <% case current_user.role %>
            <% when 'super_admin' %>
              <i class="fas fa-shield-alt me-2"></i> Panel de Administración
            <% when 'owner' %>
              <i class="fas fa-crown me-2"></i> Panel de Control
            <% when 'barber' %>
              <i class="fas fa-cut me-2"></i> ¡Hola <%= current_user.name.split.first %>!
            <% when 'customer' %>
              <i class="fas fa-user-circle me-2"></i> ¡Bienvenido <%= current_user.name.split.first %>!
            <% end %>
          </h1>
          <p class="mb-0 opacity-75">
            <% case current_user.role %>
            <% when 'super_admin' %>
              Control total del sistema BarberSaaS
            <% when 'owner' %>
              <%= current_user.barbershop&.name || 'Tu Barbería' %> - Gestión empresarial
            <% when 'barber' %>
              Tu espacio de trabajo - <%= current_user.barbershop&.name || 'Barbería' %>
            <% when 'customer' %>
              Tu panel personal de citas y reservas
            <% end %>
          </p>
        </div>
        <div class="col-md-4 text-md-end">
          <i class="fas fa-calendar-day me-2"></i>
          <%= Date.current.strftime("%d de %B, %Y") %>
        </div>
      </div>
    </div>
  </div>

  <!-- EJEMPLO DE ESTADÍSTICAS / CARDS -->
  <div class="container mb-5">
    <div class="row g-4">
      <% case current_user.role %>
      <% when 'super_admin' %>
        <div class="col-lg-3 col-md-6">
          <div class="card card-modern text-center p-3">
            <i class="fas fa-store text-primary fa-2x mb-2"></i>
            <h5>Barberías</h5>
            <h2 class="text-primary">150</h2>
            <small class="text-muted">Registradas</small>
          </div>
        </div>
        <div class="col-lg-3 col-md-6">
          <div class="card card-modern text-center p-3">
            <i class="fas fa-users text-success fa-2x mb-2"></i>
            <h5>Usuarios</h5>
            <h2 class="text-success">1,250</h2>
            <small class="text-muted">Activos</small>
          </div>
        </div>
      <% when 'owner' %>
        <div class="col-lg-3 col-md-6">
          <div class="card card-modern text-center p-3">
            <i class="fas fa-map-marker-alt text-primary fa-2x mb-2"></i>
            <h5>Sucursales</h5>
            <h2 class="text-primary">3</h2>
            <small class="text-muted">Activas</small>
          </div>
        </div>
      <% when 'barber' %>
        <div class="col-lg-4 col-md-6">
          <div class="card card-modern text-center p-3">
            <i class="fas fa-calendar-check text-primary fa-2x mb-2"></i>
            <h5>Mis Citas Hoy</h5>
            <h2 class="text-primary">6</h2>
            <small class="text-muted">Próxima: 14:30</small>
          </div>
        </div>
      <% when 'customer' %>
        <div class="col-lg-6">
          <div class="card card-modern p-3">
            <h5><i class="fas fa-calendar-plus text-primary me-2"></i> Reservar Nueva Cita</h5>
            <p class="text-muted">¿Necesitas un corte? Reserva fácilmente.</p>
            <%= link_to "#", class: "btn btn-primary" do %>
              <i class="fas fa-plus me-2"></i>Reservar Ahora
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  </div>

<% else %>
  <!-- LANDING PAGE PARA NO LOGUEADOS -->

  <!-- HERO -->
  <section class="hero-section text-white d-flex align-items-center" style="background: linear-gradient(135deg, var(--primary-color), #34495e); padding: 100px 0; margin-top: -80px;">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-lg-6">
          <%# FRASE DINÁMICA SEGÚN EL ROL QUE QUIERA EL USUARIO %>
          <%# Podés después mejorar esto con JS para que cambie al hacer hover en cada botón %>
          <h1 class="fw-bold mb-4 display-5" id="hero-title">
            <span class="text-warning">Gestiona</span> tu barbería.
          </h1>
          <p class="lead mb-4 text-light" id="hero-subtitle">
            Organiza turnos, controla ingresos y haz crecer tu negocio con BarberSaaS.
          </p>

          <div class="d-flex flex-wrap gap-2">
            <%= link_to new_user_session_path(role: "owner"), class: "btn btn-warning rounded-pill px-4 py-2 fw-bold" do %>
              <i class="fas fa-crown me-2"></i>Soy Propietario
            <% end %>

            <%= link_to new_user_session_path(role: "barber"), class: "btn btn-outline-light rounded-pill px-4 py-2 fw-bold" do %>
              <i class="fas fa-cut me-2"></i>Soy Barbero
            <% end %>

            <%= link_to new_user_session_path(role: "customer"), class: "btn btn-outline-light rounded-pill px-4 py-2 fw-bold" do %>
              <i class="fas fa-user me-2"></i>Soy Cliente
            <% end %>
          </div>
        </div>

        <div class="col-lg-6 text-center mt-4 mt-lg-0">
          <i class="fas fa-scissors text-white-50" style="font-size: 12rem;"></i>
        </div>
      </div>
    </div>
  </section>

  <!-- BENEFICIOS -->
  <section class="py-5 bg-white">
    <div class="container text-center">
      <h2 class="fw-bold mb-5 text-primary">Una plataforma, múltiples beneficios</h2>
      <div class="row g-4">
        <div class="col-md-6">
          <div class="p-4 shadow-sm rounded-3 h-100">
            <div class="rounded-circle d-flex align-items-center justify-content-center mx-auto mb-3" style="width:80px; height:80px; background: linear-gradient(135deg, var(--secondary-color), var(--accent-color)); color:white;">
              <i class="fas fa-store fa-2x"></i>
            </div>
            <h5>Múltiples Sucursales</h5>
            <p class="text-muted">Gestiona todas tus sucursales con reportes unificados.</p>
          </div>
        </div>
        <div class="col-md-6">
          <div class="p-4 shadow-sm rounded-3 h-100">
            <div class="rounded-circle d-flex align-items-center justify-content-center mx-auto mb-3" style="width:80px; height:80px; background: linear-gradient(135deg, var(--secondary-color), var(--accent-color)); color:white;">
              <i class="fas fa-chart-line fa-2x"></i>
            </div>
            <h5>Analytics Avanzados</h5>
            <p class="text-muted">Reportes de ventas, clientes frecuentes y performance.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA FINAL -->
  <section class="py-5 text-white text-center" style="background: var(--primary-color);">
    <div class="container">
      <h2 class="fw-bold mb-3">¿Listo para dar el siguiente paso?</h2>
      <p class="lead mb-4">Únete gratis y transforma tu barbería.</p>
      <%= link_to new_user_registration_path, class: "btn btn-warning btn-lg rounded-pill px-5 fw-bold" do %>
        Comenzar Gratis
      <% end %>
    </div>
  </section>

<% end %>
<script>
  document.addEventListener("DOMContentLoaded", function() {
    const heroTitle   = document.getElementById("hero-title");
    const heroSubtitle = document.getElementById("hero-subtitle");

    const frases = {
      owner: {
        title: "<span class='text-warning'>Gestiona</span> tu barbería como un pro",
        subtitle: "Organiza turnos, controla ingresos y haz crecer tu negocio con BarberSaaS."
      },
      barber: {
        title: "Donde los <span class='text-warning'>barberos brillan</span>",
        subtitle: "Lleva tu agenda al día, crece tu clientela y aumenta tus comisiones."
      },
      customer: {
        title: "<span class='text-warning'>Tu corte</span>, a un clic de distancia",
        subtitle: "Reserva fácil, elige tu barbero favorito y recibe recordatorios automáticos."
      }
    };

    document.querySelectorAll("[data-role]").forEach(btn => {
      btn.addEventListener("mouseenter", () => {
        const role = btn.dataset.role;
        heroTitle.innerHTML   = frases[role].title;
        heroSubtitle.innerHTML = frases[role].subtitle;
      });
    });
  });
</script>